ukraine_alerts_package:


    binary_sensor:

        - platform: group
          name: m_novomoskovsk_alerts
          device_class: safety
          entities:
            - binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_air
            - binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_artillery
            - binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_chemical
            - binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_nuclear
            - binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_urban_fights
            - binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_unknown

    automation:

        - alias: "Alert: Disable Voice Notifications when Alert Notifications are Disabled"
          id: alert_disable_mode
          description: 'При запрете тревоги, выключать голосовую тревогу'
          mode: single
          trigger:
            - platform: state
              entity_id: input_boolean.disable_alerts_notifications
              from: 'off'
              to: 'on'
          condition:
            - condition: state
              entity_id: input_boolean.disable_voice_alerts
              state: 'off'
          action:
            - service: input_boolean.turn_on
              entity_id: input_boolean.disable_voice_alerts

        - alias: "Alert: Notification about Active Air Alert in Novomoskovsk"
          id: alert_novomoskovsk_air_on
          description: 'Воздушная тревога, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_air
              from: 'off'
              to: 'on'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002708"}}{{"\U0001F680"}} ОБЪЯВЛЕНА ВОЗДУШНАЯ ТРЕВОГА{{"\U0000203C"}}{{"\U0000203C"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_play_file
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  music_file: '/media/local/alerts/Sound_17898.mp3'
                #   delay_secs: 13
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! ОБЪЯВЛЕНА ВОЗДУШНАЯ ТРЕВОГА!'

        - alias: "Alert: Notification about Not Active Air Alert in Novomoskovsk"
          id: alert_novomoskovsk_air_off
          description: 'Воздушная тревога - отбой, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_air
              from: 'on'
              to: 'off'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}} ОТБОЙ ВОЗДУШНОЙ ТРЕВОГИ {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! Отбой воздушной тревоги!'

        - alias: "Alert: Notification about Active Artillery Alert in Novomoskovsk"
          id: alert_novomoskovsk_artillery_on
          description: 'Угроза артилерийского обстрела, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_artillery
              from: 'off'
              to: 'on'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U0001F4A5"}}{{"\U0001F4A5"}} УГРОЗА АРТИЛЛЕРИЙСКОГО ОБСТРЕЛА{{"\U0000203C"}}{{"\U0000203C"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_play_file
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  music_file: '/media/local/alerts/Sound_15028.mp3'
                #   delay_secs: 12
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! УГРОЗА АРТИЛЛЕРИЙСКОГО ОБСТРЕЛА!'

        - alias: "Alert: Notification about Not Active Artillery Alert in Novomoskovsk"
          id: alert_novomoskovsk_artillery_off
          description: 'Угроза артилерийского обстрела - отмена, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_artillery
              from: 'on'
              to: 'off'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}} ОТМЕНА УГРОЗЫ АРТИЛЛЕРИЙСКОГО ОБСТРЕЛА {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! Отмена угрозы артиллерийского обстрела!'

        - alias: "Alert: Notification about Active Urban Fights Alert in Novomoskovsk"
          id: alert_novomoskovsk_urban_fights_on
          description: 'Угроза городских боев, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_urban_fights
              from: 'off'
              to: 'on'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U0001F4A5"}}{{"\U0001F4A5"}} УГРОЗА ГОРОДСКИХ БОЁВ{{"\U0000203C"}}{{"\U0000203C"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_play_file
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  music_file: '/media/local/alerts/Sound_15028.mp3'
                #   delay_secs: 12
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! УГРОЗА ГОРОДСКИХ БОЁВ!'

        - alias: "Alert: Notification about Not Active Urban Fights Alert in Novomoskovsk"
          id: alert_novomoskovsk_urban_fights_off
          description: 'Угроза городских боев - отмена, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_urban_fights
              from: 'on'
              to: 'off'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}} ОТМЕНА УГРОЗЫ ГОРОДСКИХ БОЁВ {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! Отмена угрозы городских боёв!'

        - alias: "Alert: Notification about Active Chemical Alert in Novomoskovsk"
          id: alert_novomoskovsk_chemical_on
          description: 'Угроза городских боев, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_chemical
              from: 'off'
              to: 'on'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002623\U00002623"}} ОБЪЯВЛЕНА ХИМИЧЕСКАЯ ТРЕВОГА{{"\U0000203C\U0000203C"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_play_file
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  music_file: '/media/local/alerts/Chemical_Alert_Sound.mp3'
                #   delay_secs: 12
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! ОБЪЯВЛЕНА ХИМИЧЕСКАЯ ТРЕВОГА!'

        - alias: "Alert: Notification about Not Active Chemical Alert in Novomoskovsk"
          id: alert_novomoskovsk_chemical_off
          description: 'Угроза городских боев - отмена, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_chemical
              from: 'on'
              to: 'off'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002705\U00002705\U00002705"}} ОТМЕНА ХИМИЧЕСКОЙ ТРЕВОГИ {{"\U00002705\U00002705\U00002705"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! Отмена химической тревоги!'

        - alias: "Alert: Notification about Active Nuclear Alert in Novomoskovsk"
          id: alert_novomoskovsk_nuclear_on
          description: 'Угроза городских боев, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_nuclear
              from: 'off'
              to: 'on'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002622\U00002622"}} ОБЪЯВЛЕНА ЯДЕРНАЯ ТРЕВОГА{{"\U0000203C\U0000203C"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_play_file
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  music_file: '/media/local/alerts/Nuclear_Alert_Sound.mp3'
                #   delay_secs: 12
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! ОБЪЯВЛЕНА ЯДЕРНАЯ ТРЕВОГА!'

        - alias: "Alert: Notification about Not Active Nuclear Alert in Novomoskovsk"
          id: alert_novomoskovsk_nuclear_off
          description: 'Угроза городских боев - отмена, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_nuclear
              from: 'on'
              to: 'off'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002705\U00002705\U00002705"}} ОТМЕНА ЯДЕРНОЙ ТРЕВОГИ {{"\U00002705\U00002705\U00002705"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! Отмена ядерной тревоги!'

        - alias: "Alert: Notification about Active Unknown Alert in Novomoskovsk"
          id: alert_novomoskovsk_unknown_on
          description: 'Неизвестная угроза, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_unknown
              from: 'off'
              to: 'on'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U000026A0"}}{{"\U000026A0"}} НЕИЗВЕСТНАЯ УГРОЗА {{"\U0000203C"}}{{"\U0000203C"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_play_file
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  music_file: '/media/local/alerts/Sound_17898.mp3'
                #   delay_secs: 13
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! НЕИЗВЕСТНАЯ УГРОЗА!'

        - alias: "Alert: Notification about Not Active Unknown Alert in Novomoskovsk"
          id: alert_novomoskovsk_unknown_off
          description: 'Неизвестная угроза - отмена, Новомосковск'
          mode: single
          trigger:
            - platform: state
              entity_id: binary_sensor.m_novomoskovsk_ta_novomoskovska_teritorialna_gromada_unknown
              from: 'on'
              to: 'off'
          condition:
            - condition: state
              entity_id: input_boolean.disable_alerts_notifications
              state: 'off'
          action:
              - service: notify.alexus
                data:
                  title: '{{"\U0001F4E2"}} ВНИМАНИЕ{{"\U0000203C"}}'
                  message:  |
                    ➖➖➖➖➖➖➖➖➖➖➖➖
                    {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}} ОТМЕНА НЕИЗВЕСТНОЙ УГРОЗЫ {{"\U00002705"}}{{"\U00002705"}}{{"\U00002705"}}
              - condition: state
                entity_id: input_boolean.disable_voice_alerts
                state: 'off'
              - condition: state
                entity_id: binary_sensor.anyone_home
                state: 'on'
              - service: script.sonos_say
                data: 
                  sonos_entity: media_player.sonos_living_room
                  volume: 0.4
                  message: 'ВНИМАНИЕ!!! Отмена неизвестной угрозы!'
