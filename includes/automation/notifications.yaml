    - alias: "Bathroom: Notification about Water Leakage under Bath"
      id: bathroom_notify_about_water_leak_under_the_bath
      description: 'Уведомление о протечке воды под ванной'
      mode: single
      trigger:
        - type: moist
          platform: device
          device_id: e76bb600c400a5b7520a0ce5311870d4
          entity_id: binary_sensor.bathroom_water_leak_under_the_bath_water_leak
          domain: binary_sensor
      condition: []
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message:  |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              {{"\U0001F4A7"}} Обнаружена протечка в ванной комнате под ванной{{"\U0000203C"}}
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.4
            message: 'ВНИМАНИЕ!!! Обнаружена протечка в ванной комнате под ванной!'

    - alias: "Bathroom: Notification about Water Leakage under Washing Machine"
      id: bathroom_notify_about_water_leak_under_washing_machine
      description: 'Уведомление о протечке воды в ванной под стиральной машиной'
      mode: single
      trigger:
        - type: moist
          platform: device
          device_id: 46788e98449767dab7c25ef2d34137d7
          entity_id: binary_sensor.bathroom_water_leak_under_washing_machine_water_leak
          domain: binary_sensor
      condition: []
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message:  |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              {{"\U0001F4A7"}} Обнаружена протечка в ванной комнате под стиральной машиной{{"\U0000203C"}}
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.4
            message: 'ВНИМАНИЕ!!! Обнаружена протечка в ванной комнате под стиральной машиной!'

    - alias: "Bathroom: Notification about finished programm by washing machine"
      id: bathroom_notify_about_washing_machine_cycle_finihed
      description: 'Уведомление об окончании цикла стирки'
      mode: single
      trigger:
        - platform: state
          entity_id: binary_sensor.bathroom_washing_machine_socket_status
          to: 'off'
      condition: []
      action:
        - service: notify.alexus
          data:
            title: '{{"\U0001F504"}} Стиральная Машина{{"\U0000203C"}}'
            message:  |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              {{"\U0001F9FA"}} Программа стирки завершена{{"\U0000203C"}}
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.3
            message: 'Стиральная машина завершила программу!'

    - alias: "Kitchen: Notification about water leakage"
      id: kitchen_notify_about_water_leak
      description: 'Уведомление о протечке воды в кухне'
      mode: single
      trigger:
        - type: moist
          platform: device
          device_id: 9123c5c70c00e2ab32573b42b2c11ace
          entity_id: binary_sensor.kitchen_water_leak_sensor_water_leak
          domain: binary_sensor
      condition: []
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              {{"\U0001F4A7"}} Обнаружена протечка в кухне под мойкой{{"\U0000203C"}}
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.4
            message: 'ВНИМАНИЕ!!! Обнаружена протечка в кухне под мойкой!'

    - alias: "Kitchen: Notification about Smoke Detection"
      id: kitchen_notify_about_smoke_detection
      description: 'Уведомление об обнаружении дыма в кухне'
      mode: single
      trigger:
        - type: smoke
          platform: device
          device_id: 7b615184042873bb55a51829cde9ba29
          entity_id: binary_sensor.kitchen_smoke_detector_smoke
          domain: binary_sensor
      condition: []
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              {{"\U0001F525"}} Обнаружен дым на кухне{{"\U0000203C"}}
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.5
            message: 'ВНИМАНИЕ!!! Обнаружен дым на кухне!'

    - alias: "System: Notification about finished Startup"
      id: home_assistant_startup_notification
      trigger:
        - platform: homeassistant
          event: start
      condition:
        - condition: state
          entity_id: input_boolean.disable_startup_notifications
          state: 'off'
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              Сервер Home Assistant был перезапущен{{"\U0000203C"}}

    - alias: "System: Notification about initiated Shutdown"
      id: home_assistant_shutdown_notification
      trigger:
        - platform: homeassistant
          event: shutdown
      condition:
        - condition: state
          entity_id: input_boolean.disable_startup_notifications
          state: 'off'
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              Сервер Home Assistant выключается{{"\U0000203C"}}

    - alias: 'System: Notification about Home Assistant Updates'
      id: home_assistant_update_notification
      description: "Send notification about Home Assistant Updates"
      trigger:
        - platform: state
          entity_id: update.home_assistant_core_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.home_assistant_supervisor_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.zigbee2mqtt_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.terminal_ssh_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.mosquitto_broker_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.mariadb_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.home_assistant_google_drive_backup_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.file_editor_update
          from: 'off'
          to: 'on'
        - platform: state
          entity_id: update.phpmyadmin_update
          from: 'off'
          to: 'on'
      action:
        - service: notify.alexus
          data:
            title: '{{"\U0001F199"}} {{ trigger.to_state.attributes.friendly_name }}{{"\U0000203C"}}'
            message:  |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              Доступно {{ trigger.to_state.attributes.friendly_name }}
                Установлено: {{ trigger.to_state.attributes.installed_version }}
                Доступно: {{ trigger.to_state.attributes.latest_version }}

    - alias: "System: Notification about RPi Power Failure"
      id: rpi_ac_power_failure_notification
      trigger:
        - platform: state
          entity_id: binary_sensor.rpi_ac_power_status
          not_from:
            - "unknown"
            - "unavailable"
          not_to:
            - "unknown"
            - "unavailable"
      condition: []
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              Внешнее питание: {{"\U0001F50C"}} {% if is_state("binary_sensor.rpi_ac_power_status", "on") %}Подключено{% elif is_state("binary_sensor.rpi_ac_power_status", "off") %}Отключено{% else %}Недоступно{% endif %}
              
              {{"\U0001F50B"}} UPS Battery Status: ({% if is_state("binary_sensor.ups_battery_low","off") %}OK{%else%}Low{{"\U0000203C"}}{%endif%}) {{ states("sensor.ups_battery_capacity") }}% / {{ states("sensor.ups_battery_voltage") }}V
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.4
            message: 'ВНИМАНИЕ!!! Внешнее питание {% if is_state("binary_sensor.rpi_ac_power_status", "on") %}Подключено{% elif is_state("binary_sensor.rpi_ac_power_status", "off") %}Отключено{% else %}Недоступно{% endif %}!'

    - alias: "System: Notification about UPS Low Battery Level"
      id: ups_battery_low_level_notification
      trigger:
        - platform: state
          entity_id: binary_sensor.ups_battery_low
          from: 'off'
          to: 'on'
      condition: 
        - condition: state
          entity_id: binary_sensor.ups_battery_low
          state: 'on'
      action:
        - service: notify.alexus
          data:
            title: '{{"\U0001F50B"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              Низкий уровень заряда батареи сервера Home Assistant: {{ states("sensor.ups_battery_capacity") }}% / {{ states("sensor.ups_battery_voltage") }}V {{"\U0000203C"}}
              Внешнее питание: {{"\U0001F50C"}} {% if is_state("binary_sensor.rpi_ac_power_status", "on") %}Подключено{% else %}Отключено{% endif %}
              
              {{"\U0000203C"}}Через некоторое время сервер RPi будет остановлен{{"\U0000203C"}}
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.4
            message: |
              ВНИМАНИЕ!!! 
              Низкий уровень заряда батареи сервера Home Assistant: {{ states("sensor.ups_battery_capacity") }} процентов.
              Внешнее питание {% if is_state("binary_sensor.rpi_ac_power_status", "on") %}подключено{% else %}отключено{% endif %}!
              Через некоторое время сервер будет остановлен!

    - alias: "System: Notification about Full UPS Battery Level"
      id: ups_battery_full_level_notification
      trigger:
        - platform: numeric_state
          entity_id: sensor.ups_battery_capacity
          above: 99
      condition: 
        - condition: state
          entity_id: binary_sensor.ups_battery_low
          state: 'off'
      action:
        - service: notify.alexus
          data:
            title: '{{"\U0001F50B"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              Батарея UPS полностью заряжена: {{ states("sensor.ups_battery_capacity") }}% / {{ states("sensor.ups_battery_voltage") }}V{{"\U0000203C"}}
              Внешнее питание: {{"\U0001F50C"}} {% if is_state("binary_sensor.rpi_ac_power_status", "on") %}Подключено{% else %}Отключено{% endif %}

    - alias: "Entrance: Notification about Opened Door for more than 3 minutes"
      id: entrance_notify_about_opened_door_for_3_minutes
      description: 'Предупреждение о незакрытой входной двери'
      mode: single
      trigger:
        - type: opened
          platform: device
          device_id: 8bdd25d1820505d01332c5ac3780dee1
          entity_id: binary_sensor.hallway_entrance_door_contact
          domain: binary_sensor
          for:
            minutes: 3
      condition: []
      action:
        - service: notify.alexus
          data:
            title: '{{"\U000026A0"}} ВНИМАНИЕ{{"\U0000203C"}}'
            message: |
              Входная дверь открыта более трёх минут{{"\U0000203C"}}
        - condition: state
          entity_id: input_boolean.disable_voice_notifications
          state: 'off'
        - condition: state
          entity_id: binary_sensor.anyone_home
          state: 'on'
        - service: script.sonos_say
          data: 
            sonos_entity: media_player.sonos_living_room
            volume: 0.4
            message: 'ВНИМАНИЕ!!! Входная дверь открыта более трёх минут!'

    - alias: "Zones: Notification about changed Zone for persones"
      id: zone_notifications
      mode: queued
      trigger:
       # Дом
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.home
        event: enter
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.home
        event: leave
        # Школа
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.school
        event: enter
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.school
        event: leave
        # ISD
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.isd
        event: enter
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.isd
        event: leave
        # Университет
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.university
        event: enter
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.university
        event: leave
        # Караван
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.karavan
        event: enter
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.karavan
        event: leave
        # METRO
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.metro
        event: enter
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.metro
        event: leave
        # Эпицентр
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.epicentr
        event: enter
      - platform: zone
        entity_id: 
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.epicentr
        event: leave
      - platform: zone
        entity_id:
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.novomoskovsk
        event: leave
      - platform: zone
        entity_id:
          - person.alexus
          - person.inna
          - person.ivan
          - person.vova
        zone: zone.novomoskovsk
        event: enter
      condition:
        - condition: state
          entity_id: input_boolean.disable_zone_notifications
          state: 'off'
      action:
        - service: notify.alexus
          data:
            title: '{{"\U0001F4CC"}} Изменение расположения{{"\U0000203C"}}'
            message: |
              ➖➖➖➖➖➖➖➖➖➖➖➖
              {% if (trigger.event) == "leave" %}{{ states('sensor.time') }}: {{ trigger.to_state.name }} покинул(а) {{ trigger.zone.attributes.friendly_name }}!
              {% else %}{{ states('sensor.time') }}: {{ trigger.to_state.name }} прибыл(а) в {{ trigger.zone.attributes.friendly_name }}!
              {% endif %}
